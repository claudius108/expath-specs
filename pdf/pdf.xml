<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://expath.org/ns/xmlspec/xmlspec.rnc" type="compact"?>
<spec xmlns:spec="http://expath.org/ns/xmlspec" role="editors-copy">
    <header>
        <title>PDF Module</title>
        <version>1.0</version>
        <w3c-designation>w3c-designation</w3c-designation>
        <w3c-doctype>EXPath Candidate Module</w3c-doctype>
        <pubdate>
            <day>8</day>
            <month>November</month>
            <year>2011</year>
        </pubdate>
        <publoc>
            <loc href="http://expath.org/spec/pdf/20111108"/>
        </publoc>
        <latestloc>
		<loc href="http://expath.org/spec/pdf"/>
        </latestloc>
        <authlist>
            <author role="editor">
                <name>Claudius Teodorescu</name>
                <affiliation>XML Consultant</affiliation>
            </author>
        </authlist>
        <copyright>
            <p/>
        </copyright>
        <abstract>
            <p>This proposal provides a PDF module for XPath 2.0. It defines extension functions for converting from one digital format to another, to
		execute various processing operations of digital documents, etc. It has been designed to be compatible with XQuery 1.0 and XSLT 2.0, as well as any other standard based on XPath 2.0.</p>
        </abstract>
        <status>
            <p>Must be ignored, but is required by the schema...</p>
        </status>
        <langusage>
            <language>langusage</language>
        </langusage>
        <revisiondesc>
            <p>revisiondesc</p>
        </revisiondesc>
    </header>
    <body>
        <div1>
            <head>Introduction</head>
	    <p>This PDF module allows manipulation of PDF documents.</p>
            <div2>
                <head>Namespace conventions</head>
                <p>The module defined by this document defines functions and elements in the namespace
                  <code id="namespace-uri">http://expath.org/ns/pdf</code>. In this document, the
		  <code>pdf</code> prefix, when used, is bound to this namespace URI.</p>
                <p>Error codes are defined in the namespace <code>http://expath.org/ns/error</code>. In
               this document, <code>err</code> prefix, when used, is bound to this namespace
               URI.</p>
            </div2>
            <div2>
                <head>Error management</head>
                <p>Error conditions are identified by a code (a <code>QName</code>). When such an error
               condition is reached during the execution of the function, a dynamic error is thrown,
               with the corresponding error code (as if the standard XPath function
                  <code>error</code> had been called).</p>
            </div2>
        </div1>
        <div1>
            <head>Functions for Documents in PDF Format</head>
	    <p>These functions are designated for processing the documents in PDF format.</p>
		<div2>
			<head>The <code>digi-pub:pdf-merge()</code> Function</head>
			<p>This function is used for merging two or more (a collection of) PDF documents.</p>
<!--			<eg>
<spec:function>digi-pub:pdf-merge</spec:function>($document as <spec:type>xs:anyAtomicType</spec:type>,
	$new-resource-metadata as <spec:type>element(digi-pub:resource-metadata</spec:type>) as <spec:type>xs:anyAtomicType</spec:type>
			</eg>-->		
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-split()</code> Function</head>
			<p>This function is used for splitting a PDF document into a number of other PDF documents.</p>
			<eg>
<spec:function>digi-pub:pdf-split</spec:function>($document as <spec:type>xs:base64Binary</spec:type>,
	$options as <spec:type>element(digi-pub:options)</spec:type>) as <spec:type>xs:base64Binary+</spec:type>
			</eg>
			<ulist>
				<item>
					<p><code>$document</code> is the PDF document to be splitted.</p>
				</item>
				<item>
					<p><code>$options</code> are the options for the current operation.</p>
				</item>
			</ulist>
			<div3>
				<head>The <code>digi-pub:options</code> element</head>
				<eg>
&lt;digi-pub:options&gt;
	(digi-pub:split-delimiter+)
&lt;/digi-pub:options&gt;
				</eg>
<!--				<eg>
&lt;digi-pub:options&gt;
	(digi-pub:split-delimiter,
	digi-pub:output-filename?)
&lt;/digi-pub:options&gt;
				</eg>-->				
				<ulist>
					<item>
						<p>the <code>digi-pub:split-delimiter</code> child element
						specifies the delimiter used for splitting the input PDF
						document.</p>
					</item>					
<!--					<item>
						<p>the <code>ft-client:resource-type</code> child element is the type of the remote resource.</p>
					</item>-->
				</ulist>
			</div3>	
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-to-image()</code> Function</head>
			<p>This function is used for converting a PDF document to images.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-stamp()</code> Function</head>
			<p>This function is used for adding a stamp to a PDF document.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-sign()</code> Function</head>
			<p>This function is used for digitally sign a PDF document.</p>			
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-encrypt()</code> Function</head>
			<p>This function is used for encrypting a PDF document by using a digital certificate.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-decrypt()</code> Function</head>
			<p>This function is used for decrypting a PDF document.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-import-page()</code> Function</head>
			<p>This function is used for importing to a PDF document a page or more pages from a PDF document.</p>
		</div2>		
		<div2>
			<head>The <code>digi-pub:pdf-export-page()</code> Function</head>
			<p>This function is used for removing a page or more pages from a PDF document.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:pdf-delete-page()</code> Function</head>
			<p>This function is used for deleting a page or more pages from a PDF document.</p>
		</div2>
		<div2>
			<head>The <code>digi-pub:add-bookmark()</code> Function</head>
			<p>This function is used to add bookmarks to a PDF document.</p>
		</div2>		
        </div1>
    </body>
    <back>
        <div1>
            <head>References</head>
            <blist>
	            <bibl id="xpath-30" key="XPath 3.0">
	               <loc href="http://w3.org/TR/xpath-30/">XML Path Language (XPath) 3.0</loc>.
	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors. W3C Working Draft, 13 December 2011.</bibl>
	            <bibl id="xslt-30" key="XSLT 3.0">                        
	               <loc href="http://w3.org/TR/xslt-30/">XSL Transformations (XSLT) Version 3.0</loc>.
	               Michael Kay, editor. W3C Working Draft, 10 July 2012.</bibl>         
	            <bibl id="xquery-30" key="XQuery 3.0">                        
	               <loc href="http://w3.org/TR/xquery-30/">XQuery 3.0: An XML Query Language</loc>.
	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors. W3C Working Draft, 13 December 2011.</bibl>
            <bibl id="xpath-functions-30" key="XPath and XQuery Functions and Operators 3.0">
               <loc href="http://w3.org/TR/xpath-functions-30/">XPath and XQuery Functions and Operators 3.0</loc>.
               Michael Kay, editor. W3C Working Draft, 13 December 2011.</bibl>                                
            <bibl id="xpath-datamodel-30" key="XQuery and XPath Data Model 3.0">
               <loc href="http://w3.org/TR/xpath-datamodel-30/">XQuery and XPath Data Model 3.0</loc>.
               Norman Walsh, Anders Berglund, John Snelson, editors. W3C Working Draft, 13 December 2011.</bibl>
            </blist>
        </div1>
        <div1>
            <head>Summary of Error Conditions</head>
            <blist>
		    <bibl id="errDPUB001" key="err:DPUB001">err:DPUB001: The transformation formula is not supported.</bibl>
		    <bibl id="errDPUB002" key="err:DPUB002">err:DPUB002: The remote resource does not exist.</bibl>
		    <bibl id="errDPUB003" key="err:DPUB003">err:DPUB003: The user has no rights to access the remote resource.</bibl>
		    <bibl id="errDPUB004" key="err:DPUB004">err:DPUB004: The syntax of the transformation formula is wrong.</bibl>
            </blist>
        </div1>
    </back>
</spec>