<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>PDF Module 1.0</title>
      <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/base.css" /><style type="text/css">
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }


div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}

      code.function { font-weight: bold; }
      code.type { font-style: italic; }
      /* h1, h2, h3 { color: #84001C; background: white } */
      /* a, :link, :visited, a:active { color: #84005C; background: white } */
      body {
        background-image: url(http://expath.org/images/logo-candidate.png);
      }
   </style></head>
   <body>
      <p><a href="http://expath.org/"><img src="http://expath.org/images/expath-icon.png" alt="EXPath" height="32" width="32" /></a></p>
      <div class="head">
         
         <h1><a name="title" id="title"></a>PDF Module 1.0
         </h1>
         
         <h2><a name="w3c-doctype" id="w3c-doctype"></a>EXPath Candidate Module 9 April 2013
         </h2>
         <dl>
            <dt>This version:</dt>
            <dd>
               <a href="http://expath.org/spec/pdf/20111108">http://expath.org/spec/pdf/20111108</a>
               
            </dd>
            <dt>Latest version:</dt>
            <dd>
               		<a href="http://expath.org/spec/pdf">http://expath.org/spec/pdf</a>
               
            </dd>
            <dt>Editor:</dt>
            <dd>Claudius Teodorescu, XML Consultant</dd>
         </dl>
         <p class="copyright">
            			Copyright © 2013 Claudius Teodorescu, published by the
            			<a href="http://w3.org/community/expath/">EXPath Community Group</a>
            			under the
            			<a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               				License Agreement (CLA)</a>
            			. A human-readable
            			<a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a>
            			is
            			available.
            		
         </p>
         <p class="copyright">
            			This specification was published by the
            			<a href="http://www.w3.org/community/expath/">EXPath Community Group</a>
            			. It is not a W3C Standard nor is it on the W3C
            			Standards Track. Please note that under the
            			<a href="http://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               				License Agreement (CLA)</a>
            			there is a limited opt-out and other conditions apply.
            			Learn more about
            			<a href="http://www.w3.org/community/">W3C Community and Business
               				Groups</a>
            			.
            		
         </p>
      </div>
      <hr />
      <div>
         
         <h2><a name="abstract" id="abstract"></a>Abstract
         </h2>
         <p>This proposal provides a <span>module comprising a set of functions for manipulation of PDF documents</span>.
            It has been designed to be compatible with XQuery 3.0 and XSLT 3.0, as well as any
            other standard based on XPath 3.0.
         </p>
      </div>
      <div class="toc">
         
         <h2><a name="contents" id="contents"></a>Table of Contents
         </h2>
         <p class="toc">1 <a href="#d4e73">Introduction</a><br />
            1.1 <a href="#d4e78">Namespace conventions</a><br />
            1.2 <a href="#d4e97">Error management</a><br />
            2 <a href="#d4e108">Generalities</a><br />
            2.1 <a href="#page-ranges-explanation">Page ranges</a><br />
            3 <a href="#d4e122">Creation</a><br />
            3.1 <a href="#d4e127">The pdf:create() Function</a><br />
            3.2 <a href="#d4e146">The pdf:create-page() Function</a><br />
            4 <a href="#d4e165">Metadata</a><br />
            4.1 <a href="#overall-metadata">Overall metadata</a><br />
            4.1.1 <a href="#d4e175">Basic overall metadata</a><br />
            4.1.2 <a href="#d4e283">Custom overall metadata</a><br />
            4.2 <a href="#d4e291">The pdf:get-document-metadata() Function</a><br />
            4.3 <a href="#d4e320">The pdf:set-document-metadata() Function</a><br />
            4.4 <a href="#d4e355">Component metadata</a><br />
            5 <a href="#d4e360">Content navigation</a><br />
            6 <a href="#d4e365">Content manipulation</a><br />
            6.1 <a href="#d4e370">The pdf:merge() Function</a><br />
            6.2 <a href="#d4e392">The pdf:split() Function</a><br />
            6.2.1 <a href="#d4e427">The pdf:options element</a><br />
            6.3 <a href="#d4e442">The pdf:extract() Function</a><br />
            6.4 <a href="#d4e450">The pdf:insert() Function</a><br />
            6.5 <a href="#d4e458">The pdf:delete() Function</a><br />
            6.6 <a href="#d4e495">The pdf:rotate() Function</a><br />
            6.7 <a href="#d4e532">The pdf:reverse() Function</a><br />
            7 <a href="#d4e557">Links and bookmarks</a><br />
            7.1 <a href="#d4e562">The pdf:create-bookmark() Function</a><br />
            7.2 <a href="#d4e570">The pdf:edit-bookmark() Function</a><br />
            7.3 <a href="#d4e578">The pdf:delete-bookmark() Function</a><br />
            7.4 <a href="#d4e586">The pdf:import-bookmarks() Function</a><br />
            7.5 <a href="#d4e594">The pdf:export-bookmarks() Function</a><br />
            7.6 <a href="#d4e602">The pdf:create-link() Function</a><br />
            7.7 <a href="#d4e610">The pdf:edit-link() Function</a><br />
            7.8 <a href="#d4e618">The pdf:delete-link() Function</a><br />
            7.9 <a href="#d4e626">The pdf:import-links() Function</a><br />
            7.10 <a href="#d4e635">The pdf:export-links() Function</a><br />
            8 <a href="#d4e643">Form controls</a><br />
            8.1 <a href="#d4e648">The pdf:get-text-fields() Function</a><br />
            8.2 <a href="#d4e673">The pdf:set-text-fields() Function</a><br />
            9 <a href="#d4e706">Stamping, commenting, annotating, and marking</a><br />
            9.1 <a href="#d4e711">The pdf:stamp() Function</a><br />
            10 <a href="#d4e780">Contents rasterization</a><br />
            10.1 <a href="#d4e785">The pdf:to-image() Function</a><br />
            11 <a href="#d4e826">Attachments</a><br />
            11.1 <a href="#d4e831">The pdf:list-file-attachments() Function</a><br />
            11.2 <a href="#d4e839">The pdf:import-attachment() Function</a><br />
            11.3 <a href="#d4e847">The pdf:export-attachment() Function</a><br />
            12 <a href="#d4e856">Validation</a><br />
            12.1 <a href="#d4e861">The pdf:validate() Function</a><br />
            12.2 <a href="#d4e869">The pdf:validate-links() Function</a><br />
            12.3 <a href="#d4e877">The pdf:validate-bookmarks() Function</a><br />
            13 <a href="#d4e885">Optimization</a><br />
            13.1 <a href="#d4e890">The pdf:optimize()() Function</a><br />
            13.2 <a href="#d4e898">The pdf:linearize() Function</a><br />
            13.3 <a href="#d4e906">The pdf:compress() Function</a><br />
            13.4 <a href="#d4e914">The pdf:uncompress() Function</a><br />
            14 <a href="#d4e922">Security</a><br />
            14.1 <a href="#d4e927">The pdf:encrypt() Function</a><br />
            14.2 <a href="#d4e935">The pdf:decrypt() Function</a><br />
            14.3 <a href="#d4e943">The pdf:add-signature() Function</a><br />
            14.4 <a href="#d4e951">The pdf:remove-signature() Function</a><br />
            15 <a href="#d4e959">Repairing</a><br />
            15.1 <a href="#d4e964">The pdf:repair() Function</a><br />
            16 <a href="#d4e972">Scenarios of usage</a><br />
            16.1 <a href="#d4e977">Insert a (blank) page every nth page</a><br />
            16.2 <a href="#d4e983">Delete broken links</a><br />
            16.3 <a href="#d4e989">Audit Bookmarks and Links</a><br />
            16.4 <a href="#d4e996">Validate PDF document</a><br />
            16.5 <a href="#delete-pages-scenario">Delete pages</a><br />
            16.6 <a href="#rotate-pages-scenario">Rotate pages</a><br />
            
         </p>
         
         <h3><a name="appendices" id="appendices"></a>Appendices
         </h3>
         <p class="toc">A <a href="#d4e1016">References</a><br />
            B <a href="#d4e1065">Summary of Error Conditions</a><br />
            
         </p>
      </div>
      <hr />
      <div class="body">
         <div class="div1">
            
            <h2><a name="d4e73" id="d4e73"></a>1 Introduction
            </h2>
            <p>This module allows manipulation of PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e78" id="d4e78"></a>1.1 Namespace conventions
               </h3>
               <p>The module defined by this document defines functions and elements in the namespace
                  	<code>http://expath.org/ns/pdf</code>. In this document, the
                  		  			<code>pdf</code> prefix, when used, is bound to this namespace URI.
               </p>
               <p>Error codes are defined in the namespace <code>http://expath.org/ns/error</code>. In
                  this document, <code>err</code> prefix, when used, is bound to this namespace
                  URI.
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e97" id="d4e97"></a>1.2 Error management
               </h3>
               <p>Error conditions are identified by a code (a <code>QName</code>). When such an error
                  condition is reached during the execution of the function, a dynamic error is thrown,
                  with the corresponding error code (as if the standard XPath function
                  <code>error</code> had been called).
               </p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e108" id="d4e108"></a>2 Generalities
            </h2>
            <p>This section contains general information related to the functions detailed below.</p>
            <div class="div2">
               
               <h3><a name="page-ranges-explanation" id="page-ranges-explanation"></a>2.1 Page ranges
               </h3>
               <p>The syntax for page ranges is as follows: for single page, use the page number; for
                  a range of pages use a hyphen between the start page and the end page.
               </p>
               <div class="exampleInner"><pre>Single page: 17.
				</pre></div>
               <div class="exampleInner"><pre>Page range: 17 - 22.
				</pre></div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e122" id="d4e122"></a>3 Creation
            </h2>
            <p>These functions are for creation of PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e127" id="d4e127"></a>3.1 The <code>pdf:create()</code> Function
               </h3>
               <p>This function is used for creating a PDF document.</p>
               <div class="exampleInner"><pre>
<code class="function">pdf:create</code>($contents as <code class="type">xs:base64binary*</code>) as <code class="type">xs:base64binary</code>
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e146" id="d4e146"></a>3.2 The <code>pdf:create-page()</code> Function
               </h3>
               <p>This function is used for creating a PDF page.</p>
               <div class="exampleInner"><pre>
<code class="function">pdf:create-page</code>($contents as <code class="type">xs:base64binary?</code>) as <code class="type">xs:base64binary</code>
				</pre></div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e165" id="d4e165"></a>4 Metadata
            </h2>
            <p>These functions are for getting and setting metadata about a PDF document and its
               contents.
            </p>
            <div class="div2">
               
               <h3><a name="overall-metadata" id="overall-metadata"></a>4.1 Overall metadata
               </h3>
               <p>This is metadata about the document itself.</p>
               <div class="div3">
                  
                  <h4><a name="d4e175" id="d4e175"></a>4.1.1 Basic overall metadata
                  </h4>
                  <p>The basic metadata is given in the table below (this is an excerpt from <a href="#pdf-reference-1.7">[PDF Reference 1.7]</a>):
                  </p>
                  <table border="1" frame="border">
                     <caption>Basic overall PDF metadata</caption>
                     <thead>
                        <tr>
                           <th>Key (as <code>xs:string</code>)
                           </th>
                           <th>Value</th>
                           <th>Meaning</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td><code>Title</code></td>
                           <td><code>xs:string</code></td>
                           <td>The document’s title. (Optional)</td>
                        </tr>
                        <tr>
                           <td><code>Author</code></td>
                           <td><code>xs:string</code></td>
                           <td>The name of the person who created the document. (Optional)</td>
                        </tr>
                        <tr>
                           <td><code>Subject</code></td>
                           <td><code>xs:string</code></td>
                           <td>The subject of the document. (Optional)</td>
                        </tr>
                        <tr>
                           <td><code>Keywords</code></td>
                           <td><code>xs:string</code></td>
                           <td>Keywords associated with the document. (Optional)</td>
                        </tr>
                        <tr>
                           <td><code>Creator</code></td>
                           <td><code>xs:string</code></td>
                           <td>If the document was converted to PDF from another format, the name of the application
                              (for example, Adobe FrameMaker®) that created the
                              					      original document from which it was converted. (Optional)
                           </td>
                        </tr>
                        <tr>
                           <td><code>Producer</code></td>
                           <td><code>xs:string</code></td>
                           <td>If the document was converted to PDF from another format, the name of the application
                              (for example, Acrobat Distiller) that converted it to PDF. (Optional)
                           </td>
                        </tr>
                        <tr>
                           <td><code>CreationDate</code></td>
                           <td><code>xs:date</code></td>
                           <td>The date and time the document was created. (Optional)</td>
                        </tr>
                        <tr>
                           <td><code>ModDate</code></td>
                           <td><code>xs:date</code></td>
                           <td>The date and time the document was most recently modified. (Required if <code>PieceInfo</code> is present in the document catalog; otherwise optional)
                           </td>
                        </tr>
                        <tr>
                           <td><code>Trapped</code></td>
                           <td><code>xs:string</code></td>
                           <td>A string indicating whether the document has been modified to include trapping information
                              (see <a href="#pdf-reference-1.7">[PDF Reference 1.7]</a>, section 10.10.5,
                              					      “Trapping Support”). The legal values are: "True", "False, and "Unknown".
                              The default value is "Unknown". (Optional)
                           </td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="div3">
                  
                  <h4><a name="d4e283" id="d4e283"></a>4.1.2 Custom overall metadata
                  </h4>
                  <p>This is custom metadata about the document itself. This metadata is get or set in
                     form of an entry in the <code>map(xs:string, xs:string)</code> that
                     					constitutes the document's overall metadata.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e291" id="d4e291"></a>4.2 The <code>pdf:get-document-metadata()</code> Function
               </h3>
               <p>This function is used to get the global metadata for a PDF document, as it is defined
                  in <a href="#pdf-reference-1.7">[PDF Reference 1.7]</a>, section 10.2 Metadata.
                  				It gets the global metadata, along with the custom metadata. See <a href="#overall-metadata">[overall-metadata]</a> for details about the overall metadata.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:get-document-metadata</code>($contents as <code class="type">xs:base64Binary</code>?) as <code class="type">map(xs:string, xs:string)?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents to get the metadata from.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e320" id="d4e320"></a>4.3 The <code>pdf:set-document-metadata()</code> Function
               </h3>
               <p>This function is used to set the overall metadata for a PDF document.</p>
               <div class="exampleInner"><pre>
<code class="function">pdf:set-document-metadata</code>($contents as <code class="type">xs:base64Binary</code>?, $metadata as <code class="type">item()</code>) as <code class="type">xs:base64Binary*</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents to apply the metadata to.
                     </p>
                  </li>
                  <li>
                     <p><code>$metadata</code> is the overall metadata to be applied. See <a href="#overall-metadata">[overall-metadata]</a> for details about the overall metadata.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e355" id="d4e355"></a>4.4 Component metadata
               </h3>
               <p>This is metadata about individual components of a document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e360" id="d4e360"></a>5 Content navigation
            </h2>
            <p>These functions are for navigation among the PDF objects of a PDF document.</p>
         </div>
         <div class="div1">
            
            <h2><a name="d4e365" id="d4e365"></a>6 Content manipulation
            </h2>
            <p>These functions are for manipulation of contents of the PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e370" id="d4e370"></a>6.1 The <code>pdf:merge()</code> Function
               </h3>
               <p>This function is used for merging multiple PDF documents or subsets of them (groups
                  of pages).
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:merge</code>($contents as <code class="type">xs:base64binary</code>,
	$new-resource-metadata as <code class="type">element(pdf:resource-metadata</code>) as <code class="type">xs:base64binary</code>
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e392" id="d4e392"></a>6.2 The <code>pdf:split()</code> Function
               </h3>
               <p>This function is used for splitting a PDF document into a number of sections. It returns
                  a sequence of sections.
               </p>
               <p>There can be many options for splitting: page splitting, bookmarks splitting, extract
                  until text.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:split</code>($contents as <code class="type">xs:base64Binary</code>?,
	$options as <code class="type">element(pdf:options)</code>) as <code class="type">xs:base64Binary*</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents to be splitted.
                     </p>
                  </li>
                  <li>
                     <p><code>$options</code> are the options for the current operation.
                     </p>
                  </li>
               </ul>
               <div class="div3">
                  
                  <h4><a name="d4e427" id="d4e427"></a>6.2.1 The <code>pdf:options</code> element
                  </h4>
                  <div class="exampleInner"><pre>
	&lt;pdf:options&gt;
		(pdf:split-delimiter)
	&lt;/pdf:options&gt;
					</pre></div>
                  <ul>
                     <li>
                        <p>the <code>pdf:split-delimiter</code> child element
                           							specifies the delimiter used for splitting the input PDF
                           							document.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e442" id="d4e442"></a>6.3 The <code>pdf:extract()</code> Function
               </h3>
               <p>This function is used for extracting pages from a PDF document. It has a parameter
                  for setting the deletion of the respective pages after extraction.
                  				It returns the extracted pages.
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e450" id="d4e450"></a>6.4 The <code>pdf:insert()</code> Function
               </h3>
               <p>This function is used for inserting pages into a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e458" id="d4e458"></a>6.5 The <code>pdf:delete()</code> Function
               </h3>
               <p>This function is used for deleting pages from a PDF document. It returns the PDF document
                  having deleted the respective pages.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:delete</code>($contents as <code class="type">xs:base64binary?</code>, $page-ranges as <code class="type">xs:string*</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents from which certain pages has to be deleted.
                     </p>
                  </li>
                  <li>
                     <p><code>$page-ranges</code> is the specification of page ranges to be deleted. The syntax for page range can
                        be found at
                        						<a href="#page-ranges-explanation"><b>2.1 Page ranges</b></a>. For an example of usage, see scenario <a href="#delete-pages-scenario"><b>16.5 Delete pages</b></a>.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e495" id="d4e495"></a>6.6 The <code>pdf:rotate()</code> Function
               </h3>
               <p>This function is used for rotating indicated pages of a PDF document. The rest of
                  the pages remain unchanged and
                  				the page order is maintained. It returns the modified PDF document.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:rotate</code>($contents as <code class="type">xs:base64binary?</code>, $page-ranges-and-directions as <code class="type">map(xs:string, xs:string)?</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents for which certain pages has to be rotated.
                     </p>
                  </li>
                  <li>
                     <p><code>$page-ranges-and-directions</code> is the specification of page ranges to be rotated and in which directions. This argument
                        is a map, having as keys
                        						the page ranges and as values the corresponding directions. The syntax for page
                        range can be found at <a href="#page-ranges-explanation"><b>2.1 Page ranges</b></a>. The legal
                        						values for rotation direction are: "right 90" (clockwise with 90 degress), "180"
                        (rotation with 180 degress), and "left 90" (counterclockwise with 90 degress).
                        						For an example of usage, see scenario <a href="#rotate-pages-scenario"><b>16.6 Rotate pages</b></a>.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e532" id="d4e532"></a>6.7 The <code>pdf:reverse()</code> Function
               </h3>
               <p>This function is used for reversing pages of a PDF document. It returns the PDF document
                  with its pages in reverse order.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:reverse</code>($contents as <code class="type">xs:base64binary?</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents for which to reverse page order.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e557" id="d4e557"></a>7 Links and bookmarks
            </h2>
            <p>These functions are for manipulation of links and bookmarks of a PDF document.</p>
            <div class="div2">
               
               <h3><a name="d4e562" id="d4e562"></a>7.1 The <code>pdf:create-bookmark()</code> Function
               </h3>
               <p>This function is used to create bookmarks in a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e570" id="d4e570"></a>7.2 The <code>pdf:edit-bookmark()</code> Function
               </h3>
               <p>This function is used to edit bookmarks of a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e578" id="d4e578"></a>7.3 The <code>pdf:delete-bookmark()</code> Function
               </h3>
               <p>This function is used to delete bookmarks from a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e586" id="d4e586"></a>7.4 The <code>pdf:import-bookmarks()</code> Function
               </h3>
               <p>This function is used to import bookmarks to a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e594" id="d4e594"></a>7.5 The <code>pdf:export-bookmarks()</code> Function
               </h3>
               <p>This function is used to export bookmarks from a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e602" id="d4e602"></a>7.6 The <code>pdf:create-link()</code> Function
               </h3>
               <p>This function is used to create links in a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e610" id="d4e610"></a>7.7 The <code>pdf:edit-link()</code> Function
               </h3>
               <p>This function is used to edit links of a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e618" id="d4e618"></a>7.8 The <code>pdf:delete-link()</code> Function
               </h3>
               <p>This function is used to delete links from a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e626" id="d4e626"></a>7.9 The <code>pdf:import-links()</code> Function
               </h3>
               <p>This function is used to import links to a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e635" id="d4e635"></a>7.10 The <code>pdf:export-links()</code> Function
               </h3>
               <p>This function is used to export links from a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e643" id="d4e643"></a>8 Form controls
            </h2>
            <p>These functions are designated for gathering information about and interacting with
               form controls of a PDF document.
            </p>
            <div class="div2">
               
               <h3><a name="d4e648" id="d4e648"></a>8.1 The <code>pdf:get-text-fields()</code> Function
               </h3>
               <p>Get all the text fields from a PDF contents. Returns a map containing pairs of fully
                  qualified name and value for each text field.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:get-text-fields</code>($contents as <code class="type">xs:base64binary?</code>) as <code class="type">map(xs:string, xs:string)?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents where to get the text fields from.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e673" id="d4e673"></a>8.2 The <code>pdf:set-text-fields()</code> Function
               </h3>
               <p>Set the text fields of a PDF contents. Returns the updated PDF contents.</p>
               <div class="exampleInner"><pre>
<code class="function">pdf:set-text-fields</code>($contents as <code class="type">xs:base64binary?</code>, $text-fields as <code class="type">map(xs:string, xs:string)?</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents where to set the text fields to.
                     </p>
                  </li>
                  <li>
                     <p><code>$text-fields</code> are the information sets about the text fields, namely a map containing pairs of
                        fully qualified name
                        						and value for each text field to be set.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e706" id="d4e706"></a>9 Stamping, commenting, annotating, and marking
            </h2>
            <p>These functions are associating various objects with a PDF document.</p>
            <div class="div2">
               
               <h3><a name="d4e711" id="d4e711"></a>9.1 The <code>pdf:stamp()</code> Function
               </h3>
               <p>This function is used for applying a stamp to a PDF document. It has two signatures,
                  the first one without a CSS selector for the stamp.
               </p>
               <p>When using the first signature, the content of $stamp-styling parameter should consists
                  of a set of CSS declarations that will only be applied to the respective stamp.
                  				Also, the respective stamp will be applied on every page of the PDF contents.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:stamp</code>($contents as <code class="type">xs:base64binary?</code>, $stamp as <code class="type">item()</code>, $stamp-styling as <code class="type">xs:string</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <div class="exampleInner"><pre>
<code class="function">pdf:stamp</code>($contents as <code class="type">xs:base64binary?</code>, $stamp as <code class="type">item()</code>, $stamp-selector as <code class="type">xs:string</code>, $stamp-styling as <code class="type">xs:string</code>) as <code class="type">xs:base64binary?</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents whose pages are to be stamped.
                     </p>
                  </li>
                  <li>
                     <p><code>$stamp</code> is the stamp to be applied to the PDF contents. The stamp can be either a text, an
                        image, a PDF document,
                        						a HTML + Javascript + CSS document, a SVG document, etc. (the implementations
                        should define what formats are supported).
                     </p>
                  </li>
                  <li>
                     <p><code>$stamp-selector</code> is the CSS selector used to match the current stamp. Such selector is needed for
                        further operations on the stamp,
                        						such as updating and deleting.
                     </p>
                  </li>
                  <li>
                     <p><code>$stamp-styling</code> is the CSS styling for the current stamp.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e780" id="d4e780"></a>10 Contents rasterization
            </h2>
            <p>These functions are for rendering the PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e785" id="d4e785"></a>10.1 The <code>pdf:to-image()</code> Function
               </h3>
               <p>This function is used for converting pages of a PDF document to images. Returns a
                  sequence of the generated images.
               </p>
               <div class="exampleInner"><pre>
<code class="function">pdf:to-image</code>($contents as <code class="type">xs:base64binary?</code>, $format as <code class="type">xs:string</code>, $scaling as <code class="type">xs:string</code>) as <code class="type">xs:base64binary*</code>
				</pre></div>
               <ul>
                  <li>
                     <p><code>$contents</code> is the PDF contents whose pages are to be converted to images.
                     </p>
                  </li>
                  <li>
                     <p><code>$format</code> is the format of the outputted images.
                     </p>
                  </li>
                  <li>
                     <p><code>$scaling</code> is the scaling of the outputted images.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e826" id="d4e826"></a>11 Attachments
            </h2>
            <p>These functions are for manipulation of PDF file attachments.</p>
            <div class="div2">
               
               <h3><a name="d4e831" id="d4e831"></a>11.1 The <code>pdf:list-file-attachments()</code> Function
               </h3>
               <p>This function is used to list the file attachments of a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e839" id="d4e839"></a>11.2 The <code>pdf:import-attachment()</code> Function
               </h3>
               <p>This function is used for importing an attachment into a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e847" id="d4e847"></a>11.3 The <code>pdf:export-attachment()</code> Function
               </h3>
               <p>This function is used for exporting an attachment into a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e856" id="d4e856"></a>12 Validation
            </h2>
            <p>These functions are designated for validating a PDF document.</p>
            <div class="div2">
               
               <h3><a name="d4e861" id="d4e861"></a>12.1 The <code>pdf:validate()</code> Function
               </h3>
               <p>This function is used for validating a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e869" id="d4e869"></a>12.2 The <code>pdf:validate-links()</code> Function
               </h3>
               <p>This function is used for validating the links contained by a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e877" id="d4e877"></a>12.3 The <code>pdf:validate-bookmarks()</code> Function
               </h3>
               <p>This function is used for validating the bookmarks contained by a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e885" id="d4e885"></a>13 Optimization
            </h2>
            <p>These functions are designated for optimizing a PDF document.</p>
            <div class="div2">
               
               <h3><a name="d4e890" id="d4e890"></a>13.1 The <code>pdf:optimize()()</code> Function
               </h3>
               <p>This function is used for optimizing a PDF document, by reducing the file size without
                  affecting quality.
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e898" id="d4e898"></a>13.2 The <code>pdf:linearize()</code> Function
               </h3>
               <p>This function is used for linearizing a PDF document, for fast delivery over a network.
                  The first page is already visible, while the rest is downloaded in
                  				background
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e906" id="d4e906"></a>13.3 The <code>pdf:compress()</code> Function
               </h3>
               <p>This function is used for compressing a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e914" id="d4e914"></a>13.4 The <code>pdf:uncompress()</code> Function
               </h3>
               <p>This function is used for uncompressing a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e922" id="d4e922"></a>14 Security
            </h2>
            <p>These functions are for protection of the PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e927" id="d4e927"></a>14.1 The <code>pdf:encrypt()</code> Function
               </h3>
               <p>This function is used for encrypting a PDF document by using a digital certificate.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e935" id="d4e935"></a>14.2 The <code>pdf:decrypt()</code> Function
               </h3>
               <p>This function is used for decrypting a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e943" id="d4e943"></a>14.3 The <code>pdf:add-signature()</code> Function
               </h3>
               <p>This function is used for adding an electronic signature to a PDF document.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e951" id="d4e951"></a>14.4 The <code>pdf:remove-signature()</code> Function
               </h3>
               <p>This function is used for removing an electronic signature from a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e959" id="d4e959"></a>15 Repairing
            </h2>
            <p>These functions are for repairing and recovering of PDF documents.</p>
            <div class="div2">
               
               <h3><a name="d4e964" id="d4e964"></a>15.1 The <code>pdf:repair()</code> Function
               </h3>
               <p>This function is used for repairing a PDF document.</p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e972" id="d4e972"></a>16 Scenarios of usage
            </h2>
            <p>Scenarios of usage of the functions comprised by this module.</p>
            <div class="div2">
               
               <h3><a name="d4e977" id="d4e977"></a>16.1 Insert a (blank) page every nth page
               </h3>
               <p></p>
               <div class="exampleInner"><pre>pdf:insert(pdf:create-page(), $pattern)</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e983" id="d4e983"></a>16.2 Delete broken links
               </h3>
               <p></p>
               <div class="exampleInner"><pre>
for $broken-link in pdf:validate-links($pdf-document)
return if () then () else ()
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e989" id="d4e989"></a>16.3 Audit Bookmarks and Links
               </h3>
               <p>One can validate bookmarks and links, and export those found broken. They can be included
                  in report and/or fixed and imported to document.
               </p>
               <div class="exampleInner"><pre>
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e996" id="d4e996"></a>16.4 Validate PDF document
               </h3>
               <p>One can validate a PDf document using certain validation criteria, as such: dimensions
                  of all/certain pages should be A4 (297 mm * 210 mm),
                  				there should be no contents within a certain rectangular area of a page (left
                  margin where the print shop inserts a bar code, for instance),
                  				number of pages should be less than N, PDF version used.
               </p>
               <div class="exampleInner"><pre>
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="delete-pages-scenario" id="delete-pages-scenario"></a>16.5 Delete pages
               </h3>
               <p></p>
               <div class="exampleInner"><pre>
pdf:delete($pdf-document, ("3", "5 - 7", "13 - 17"))
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="rotate-pages-scenario" id="rotate-pages-scenario"></a>16.6 Rotate pages
               </h3>
               <p></p>
               <div class="exampleInner"><pre>
pdf:rotate($pdf-document, map {
	"3" := "right 90",
	"5 - 7" := "180",
	"13 - 17" := "left 90"
})
				</pre></div>
            </div>
         </div>
      </div>
      <div class="back">
         <div class="div1">
            
            <h2><a name="d4e1016" id="d4e1016"></a>A References
            </h2>
            <dl>
               <dt class="label"><a name="xpath-30" id="xpath-30"></a>XPath 3.0
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/xpath-30/">XML Path Language (XPath) 3.0</a>.
                  	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors.
                  W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xslt-30" id="xslt-30"></a>XSLT 3.0
               </dt>
               <dd>                        
                  	               <a href="http://w3.org/TR/xslt-30/">XSL Transformations (XSLT) Version 3.0</a>.
                  	               Michael Kay, editor. W3C Working Draft, 10 July 2012.
               </dd>
               <dt class="label"><a name="xquery-30" id="xquery-30"></a>XQuery 3.0
               </dt>
               <dd>                        
                  	               <a href="http://w3.org/TR/xquery-30/">XQuery 3.0: An XML Query Language</a>.
                  	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors.
                  W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xpath-functions-30" id="xpath-functions-30"></a>XPath and XQuery Functions and Operators 3.0
               </dt>
               <dd>
                  <a href="http://w3.org/TR/xpath-functions-30/">XPath and XQuery Functions and Operators 3.0</a>.
                  Michael Kay, editor. W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xpath-datamodel-30" id="xpath-datamodel-30"></a>XQuery and XPath Data Model 3.0
               </dt>
               <dd>
                  <a href="http://w3.org/TR/xpath-datamodel-30/">XQuery and XPath Data Model 3.0</a>.
                  Norman Walsh, Anders Berglund, John Snelson, editors. W3C Working Draft, 13 December
                  2011.
               </dd>
               <dt class="label"><a name="xfa-3.3" id="xfa-3.3"></a>XFA Specification 3.3
               </dt>
               <dd>
                  <a href="https://partners.adobe.com/public/developer/en/xml/xfa_spec_3_3.pdf">XML Forms Architecture (XFA) Specification, version 3.3</a>.
                  Adobe Systems Incorporated, 09 January 2012.
               </dd>
               <dt class="label"><a name="xfdf-3.0" id="xfdf-3.0"></a>XFDF Specification 3.0
               </dt>
               <dd>
                  <a href="https://partners.adobe.com/public/developer/en/xml/XFDF_Spec_3.0.pdf">XML Forms Data Format Specification, version 3.0</a>.
                  Adobe Systems Incorporated, August 2009.
               </dd>
               <dt class="label"><a name="pdf-reference-1.7" id="pdf-reference-1.7"></a>PDF Reference 1.7
               </dt>
               <dd>
                  <a href="http://adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf">Adobe® Portable Document Format, version 1.7</a>.
                  Adobe Systems Incorporated, November 2006.
               </dd>
               <dt class="label"><a name="css-print-profile" id="css-print-profile"></a>CSS Print Profile
               </dt>
               <dd>
                  <a href="http://w3.org/TR/css-print/">CSS Print Profile</a>.
                  Elika J. Etemad, Mozilla Corporation, and Melinda Grant, Hewlett-Packard Company,
                  editors. W3C Working Group Note, 14 March 201.
               </dd>
            </dl>
         </div>
         <div class="div1">
            
            <h2><a name="d4e1065" id="d4e1065"></a>B Summary of Error Conditions
            </h2>
            <dl>
               <dt class="label"><a name="errPDF001" id="errPDF001"></a>err:PDF001
               </dt>
               <dd>err:PDF001: The transformation formula is not supported.</dd>
               <dt class="label"><a name="errPDF002" id="errPDF002"></a>err:PDF002
               </dt>
               <dd>err:PDF002: The remote resource does not exist.</dd>
               <dt class="label"><a name="errPDF003" id="errPDF003"></a>err:PDF003
               </dt>
               <dd>err:PDF003: The user has no rights to access the remote resource.</dd>
               <dt class="label"><a name="errPDF004" id="errPDF004"></a>err:PDF004
               </dt>
               <dd>err:PDF004: The syntax of the transformation formula is wrong.</dd>
            </dl>
         </div>
      </div><script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-43293529-1']);
					_gaq.push(['_trackPageview']);
					(function() {
					var ga = document.createElement('script'); ga.type =
					'text/javascript';
					ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www')
					+
					'.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga,
					s);
					})();
				</script></body>
</html>