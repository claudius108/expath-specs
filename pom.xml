<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

	<modelVersion>4.0.0</modelVersion>

	<parent>
		<groupId>ro.kuberam.maven</groupId>
		<artifactId>sourceforge</artifactId>
		<version>0.1-SNAPSHOT</version>
	</parent>

	<groupId>org.expath.specs</groupId>
	<artifactId>base</artifactId>
	<version>0.2-SNAPSHOT</version>
	<packaging>pom</packaging>
	<name>EXPath specifications</name>
	<url>http://expath.org</url>

	<properties>
		<web-sourceforge-specs-url>${sourceforge-user-web-url}/specs/expath</web-sourceforge-specs-url>
		<web-sourceforge-spec-url>${web-sourceforge-specs-url}/${expath-spec-id}</web-sourceforge-spec-url>
		<spec-names>crypto,datatype-conversion,ft-client,time,digital-publishing,pdf,image,location</spec-names>
	</properties>

	<build>
		<pluginManagement>
			<plugins>
				<plugin>
					<groupId>org.codehaus.mojo</groupId>
					<artifactId>xml-maven-plugin</artifactId>
					<executions>
						<execution>
							<id>generate-spec-in-html-format</id>
							<phase>prepare-package</phase>
							<goals>
								<goal>transform</goal>
							</goals>
							<configuration>
								<forceCreation>true</forceCreation>
								<!-- Generate the spec -->
								<transformationSets>
									<transformationSet>
										<dir>.</dir>
										<includes>
											<include>${expath-spec-id}.xml</include>
										</includes>
										<stylesheet>../utils/generate-spec/xmlspec.xsl</stylesheet>
										<fileMappers>
											<fileMapper implementation="org.codehaus.plexus.components.io.filemappers.RegExpFileMapper">
												<pattern>^(.*)\.xml$</pattern>
												<replacement>${expath-spec-id}.html</replacement>
											</fileMapper>
										</fileMappers>
										<outputDir>${basedir}</outputDir>
									</transformationSet>
								</transformationSets>
							</configuration>
						</execution>
						<execution>
							<id>generate-specs-index</id>
							<phase>prepare-package</phase>
							<goals>
								<goal>transform</goal>
							</goals>
							<configuration>
								<forceCreation>true</forceCreation>
								<!-- Generate the spec -->
								<transformationSets>
									<!-- Generate the specs index -->
									<transformationSet>
										<dir>../utils/generate-spec</dir>
										<includes>
											<include>generate-specs-index.xsl</include>
										</includes>
										<stylesheet>../utils/generate-spec/generate-specs-index.xsl</stylesheet>
										<parameters>
											<parameter>
												<name>spec-names</name>
												<value>${spec-names}</value>
											</parameter>
										</parameters>
									</transformationSet>
									<!-- Generate some of the lib's Java classes -->
									<transformationSet>
										<dir>.</dir>
										<includes>
											<include>${expath-spec-id}.xml</include>
										</includes>
										<stylesheet>../utils/generate-module/generate-java-classes.xsl</stylesheet>
										<parameters>
											<parameter>
												<name>java-package-name</name>
												<value>${java-package-name}</value>
											</parameter>
											<parameter>
												<name>expath-spec-id</name>
												<value>${expath-spec-id}</value>
											</parameter>
										</parameters>
									</transformationSet>
								</transformationSets>
							</configuration>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<groupId>org.codehaus.mojo</groupId>
					<artifactId>wagon-maven-plugin</artifactId>
					<executions>
						<execution>
							<id>upload-index-of-specs-to-kuberam.ro</id>
							<phase>package</phase>
							<goals>
								<goal>upload-single</goal>
							</goals>
							<configuration>
								<serverId>sourceforge</serverId>
								<fromFile>../index.html</fromFile>
								<toFile>index.html</toFile>
								<url>${web-sourceforge-specs-url}</url>
							</configuration>
						</execution>
						<execution>
							<id>upload-spec-to-sourceforge</id>
							<phase>package</phase>
							<goals>
								<goal>upload-single</goal>
							</goals>
							<configuration>
								<serverId>sourceforge</serverId>
								<fromFile>${expath-spec-id}.html</fromFile>
								<toFile>${expath-spec-id}.html</toFile>
								<url>${web-sourceforge-spec-url}</url>
							</configuration>
						</execution>
					</executions>
				</plugin>
				<plugin>
					<artifactId>maven-assembly-plugin</artifactId>
					<executions>
						<execution>
							<id>zip-assembly</id>
							<phase>prepare-package</phase>
							<goals>
								<goal>single</goal>
							</goals>
						</execution>
					</executions>
					<configuration>
						<finalName>${project.artifactId}-${project.version}</finalName>
						<appendAssemblyId>false</appendAssemblyId>
						<descriptors>
							<descriptor>../assembly.xml</descriptor>
						</descriptors>
					</configuration>
				</plugin>
			</plugins>
		</pluginManagement>
	</build>

</project>