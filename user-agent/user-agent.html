<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>User Agent Module 1.0</title>
      <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/base.css" /><style type="text/css">
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }


div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}

      code.function { font-weight: bold; }
      code.type { font-style: italic; }
      /* h1, h2, h3 { color: #84001C; background: white } */
      /* a, :link, :visited, a:active { color: #84005C; background: white } */
      body {
        background-image: url(http://expath.org/images/logo-candidate.png);
      }
   </style></head>
   <body>
      <p><a href="http://expath.org/"><img src="http://expath.org/images/expath-icon.png" alt="EXPath" height="32" width="32" /></a></p>
      <div class="head">
         
         <h1><a name="title" id="title"></a>User Agent Module 1.0
         </h1>
         
         <h2><a name="w3c-doctype" id="w3c-doctype"></a>EXPath Candidate Module 12 February 2012
         </h2>
         <dl>
            <dt>Latest version:</dt>
            <dd>
               <a href="http://expath.org/spec/location">http://expath.org/spec/location</a>
               
            </dd>
            <dt>Editor:</dt>
            <dd>Claudius Teodorescu, XML Consultant</dd>
         </dl>
         <p class="copyright">
            			Copyright Â© 2013 Claudius Teodorescu, published by the
            			<a href="http://w3.org/community/expath/">EXPath Community Group</a>
            			under the
            			<a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               				License Agreement (CLA)</a>
            			. A human-readable
            			<a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a>
            			is
            			available.
            		
         </p>
         <p class="copyright">
            			This specification was published by the
            			<a href="http://www.w3.org/community/expath/">EXPath Community Group</a>
            			. It is not a W3C Standard nor is it on the W3C
            			Standards Track. Please note that under the
            			<a href="http://www.w3.org/community/about/agreements/cla/">W3C Community Contributor
               				License Agreement (CLA)</a>
            			there is a limited opt-out and other conditions apply.
            			Learn more about
            			<a href="http://www.w3.org/community/">W3C Community and Business
               				Groups</a>
            			.
            		
         </p>
      </div>
      <hr />
      <div>
         
         <h2><a name="abstract" id="abstract"></a>Abstract
         </h2>
         <p>This proposal defines a <span>module comprising a set of functions for actions within an user agent</span>.
            It has been designed to be compatible with XQuery 3.0 and XSLT 3.0, as well as any
            other standard based on XPath 3.0.
         </p>
      </div>
      <div class="toc">
         
         <h2><a name="contents" id="contents"></a>Table of Contents
         </h2>
         <p class="toc">1 <a href="#d4e69">Introduction</a><br />
            1.1 <a href="#d4e77">Namespace conventions</a><br />
            1.2 <a href="#d4e104">Error management</a><br />
            2 <a href="#d4e115">External variables</a><br />
            2.1 <a href="#d4e120">The $ua:document variable</a><br />
            2.2 <a href="#d4e128">The $ua:cursor-position variable</a><br />
            2.3 <a href="#d4e135">The $ua:selector variable</a><br />
            3 <a href="#datatypes">Datatypes</a><br />
            3.1 <a href="#d4e147">The ua-dt:xpath-selector datatype</a><br />
            3.2 <a href="#d4e166">The ua-dt:css-selector datatype</a><br />
            4 <a href="#selectors">Selectors</a><br />
            4.1 <a href="#d4e194">The XPath selectors</a><br />
            4.2 <a href="#d4e203">The CSS selectors</a><br />
            5 <a href="#d4e212">Events</a><br />
            5.1 <a href="#d4e217">The ua:create-event() function</a><br />
            5.1.1 <a href="#event-initialization-parameters">The event initialization parameters</a><br />
            5.2 <a href="#d4e293">The ua:add-event-listener() function</a><br />
            5.3 <a href="#d4e365">The ua:remove-event-listener() function</a><br />
            5.4 <a href="#d4e437">The ua:dispatch-event() function</a><br />
            6 <a href="#d4e472">Actions</a><br />
            6.1 <a href="#d4e477">The ua:action() function</a><br />
            7 <a href="#d4e548">Mutation observers</a><br />
            7.1 <a href="#d4e555">The ua:observer() function</a><br />
            7.2 <a href="#d4e611">The ua:connect-observer() function</a><br />
            7.3 <a href="#d4e658">The ua:disconnect-observer() function</a><br />
            8 <a href="#d4e685">Templates</a><br />
            8.1 <a href="#d4e702">Custom data attributes</a><br />
            8.1.1 <a href="#d4e715">Custom data attribute data-ua-ref</a><br />
            8.1.2 <a href="#d4e724">Custom data attribute data-ua-type</a><br />
            8.2 <a href="#d4e748">The ua:context() function</a><br />
            8.3 <a href="#d4e764">The ua:template() function</a><br />
            8.4 <a href="#d4e799">The ua:attach-template() function</a><br />
            8.5 <a href="#d4e869">The ua:dettach-template() function</a><br />
            8.6 <a href="#d4e926">The ua:show-template() function</a><br />
            8.7 <a href="#d4e953">The ua:hide-template() function</a><br />
            8.8 <a href="#d4e981">The ua:get-template() function</a><br />
            8.9 <a href="#d4e1006">The ua:update-template() function</a><br />
            9 <a href="#data-instances">Data instances</a><br />
            10 <a href="#d4e1068">Scenarios of usage</a><br />
            10.1 <a href="#create-event-scenario">Create an event</a><br />
            10.2 <a href="#create-dialog-template">Create a dialog template</a><br />
            
         </p>
         
         <h3><a name="appendices" id="appendices"></a>Appendices
         </h3>
         <p class="toc">A <a href="#d4e1114">References</a><br />
            B <a href="#d4e1168">Summary of Error Conditions</a><br />
            
         </p>
      </div>
      <hr />
      <div class="body">
         <div class="div1">
            
            <h2><a name="d4e69" id="d4e69"></a>1 Introduction
            </h2>
            <p>This proposal defines a <span>module for providing functions dealing with actions within
                  an user agent</span>. It has been designed to be compatible with XQuery 3.0 and XSLT 3.0, as well as any
               other standard
               based on XPath 3.0.
            </p>
            <div class="div2">
               
               <h3><a name="d4e77" id="d4e77"></a>1.1 Namespace conventions
               </h3>
               <p>The module defined by this document defines functions and elements in the namespace
                  <code>http://expath.org/ns/user-agent</code>. In this document, the
                  <code>ua</code> prefix, when used, is bound to this namespace URI.
               </p>
               <p>Datatypes are defined in the namespace <code>http://expath.org/ns/user-agent/datatype</code>. In
                  this document, the <code>ua-dt</code> prefix, when used, is bound to this namespace
                  URI.
               </p>
               <p>Error codes are defined in the namespace <code>http://expath.org/ns/error</code>. In
                  this document, the <code>err</code> prefix, when used, is bound to this namespace
                  URI.
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e104" id="d4e104"></a>1.2 Error management
               </h3>
               <p>Error conditions are identified by a code (a <code>QName</code>). When such an error
                  condition is reached during the execution of the function, a dynamic error is thrown,
                  with the corresponding error code (as if the standard XPath function
                  <code>error</code> had been called).
               </p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e115" id="d4e115"></a>2 External variables
            </h2>
            <p>These variables are available to the XQuery scripts associated with a document.</p>
            <div class="div2">
               
               <h3><a name="d4e120" id="d4e120"></a>2.1 The <code>$ua:document</code> variable
               </h3>
               <p>This variable is bound to the document itself.</p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e128" id="d4e128"></a>2.2 The <code>$ua:cursor-position</code> variable
               </h3>
               <p></p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e135" id="d4e135"></a>2.3 The <code>$ua:selector</code> variable
               </h3>
               <p></p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="datatypes" id="datatypes"></a>3 Datatypes
            </h2>
            <p>These custom datatypes are defined to be used by the module functions.</p>
            <div class="div2">
               
               <h3><a name="d4e147" id="d4e147"></a>3.1 The <code>ua-dt:xpath-selector</code> datatype
               </h3>
               <p>This constructor functions casts the input to a custom datatype that provides XPath
                  type selector to module functions to take as argument.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua-dt:xpath-selector</code>($arg as <code class="type">xs:anyAtomicType?</code>) as <code class="type">ua-dt:xpath-selector?</code>
</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e166" id="d4e166"></a>3.2 The <code>ua-dt:css-selector</code> datatype
               </h3>
               <p>This constructor functions casts the input to a custom datatype that provides CSS
                  type selector to module functions to take as argument.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua-dt:css-selector</code>($arg as <code class="type">xs:anyAtomicType?</code>) as <code class="type">ua-dt:css-selector?</code>
</pre></div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="selectors" id="selectors"></a>4 Selectors
            </h2>
            <p>Many functions in this specification use selectors for nodes as parameters. These
               selectors can be of two types, namely XPath selectors, and CSS selectors.
            </p>
            <p>In the context of this specification, if multiple nodes are selected, then the invoking
               action is executed for each one of them, and if the selector selects
               no node, this is an error <a href="#errUA04">[err:UA04]</a>.
            </p>
            <div class="div2">
               
               <h3><a name="d4e194" id="d4e194"></a>4.1 The XPath selectors
               </h3>
               <p>These selectors consist of valid XPath expressions, see <a href="#xpath-30">[XPath 3.0]</a>. In order to supply XPath expressions as parameters, one has to use a 
                  constructor function, according to <a href="#datatypes"><b>3 Datatypes</b></a>.
               </p>
            </div>
            <div class="div2">
               
               <h3><a name="d4e203" id="d4e203"></a>4.2 The CSS selectors
               </h3>
               <p>These selectors are valid CSS selectors, see <a href="#css-selectors">[CSS Selectors]</a>. In order to supply CSS selectors as parameters, one has to use a 
                  constructor function, according to <a href="#datatypes"><b>3 Datatypes</b></a>.
               </p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e212" id="d4e212"></a>5 Events
            </h2>
            <p>These functions are meant to handle DOM events.</p>
            <div class="div2">
               
               <h3><a name="d4e217" id="d4e217"></a>5.1 The <code>ua:create-event()</code> function
               </h3>
               <p>This function creates a custom event. It has two signatures: the first one takes as
                  argument only the event type, while the initalization parameters are set to their
                  default values, and the
                  second consists of a map containing the initialization parameters.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:create-event</code>($type as <code class="type">xs:QName</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:create-event</code>($type as <code class="type">xs:QName</code>, $initialization-parameters as <code class="type">map(xs:string, item()*)</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$type</code> is the name of the event.
                     </p>
                  </li>
                  <li>
                     <p><code>$initialization-parameters</code> are the parameters needed for initalization of the event. For details, see <a href="#event-initialization-parameters"><b>5.1.1 The event initialization parameters</b></a></p>
                  </li>
               </ul>
               <div class="div3">
                  
                  <h4><a name="event-initialization-parameters" id="event-initialization-parameters"></a>5.1.1 The event initialization parameters
                  </h4>
                  <p>There are three initialization parameters:</p>
                  <ul>
                     <li>
                        <p><code>bubbles</code> is a boolean indicating if the event bubbles up through the DOM or not. Its default
                           value is <code>false()</code>.
                        </p>
                     </li>
                     <li>
                        <p><code>cancelable</code> is a boolean indicating if the event is cancelable. Its default value is <code>false()</code>.
                        </p>
                     </li>
                     <li>
                        <p><code>detail</code> is the data passed when initializing the event.
                        </p>
                     </li>
                  </ul>
                  <p>For examples of usage, see <a href="#create-event-scenario"><b>10.1 Create an event</b></a>.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e293" id="d4e293"></a>5.2 The <code>ua:add-event-listener()</code> function
               </h3>
               <p>This function registers an event listener.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:add-event-listener</code>($event-target-selector as <code class="type">xs:anyType</code>, $event-type as <code class="type">xs:string</code>,
	$listener as <code class="type">item()</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:add-event-listener</code>($event-target as <code class="type">xs:string</code>, $event-type as <code class="type">xs:string</code>,
	$listener as <code class="type">item()</code>, $useCapture as <code class="type">xs:boolean</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$event-target-selector</code> is the selector for the target of the event. The target may be an element, the document
                        itself, etc.
                        See <a href="#dom-4">[W3C DOM4]</a> for more details.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-type</code> is the type of the event to listen for.
                     </p>
                  </li>
                  <li>
                     <p><code>$listener</code> is the handler of an action, a block of code, or a function to be executed.
                     </p>
                  </li>
                  <li>
                     <p><code>$useCapture</code> is the indication that the user wishes to initiate capture. Its default value is
                        <code>false()</code>.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e365" id="d4e365"></a>5.3 The <code>ua:remove-event-listener()</code> function
               </h3>
               <p>This function removes a registered event listener.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:remove-event-listener</code>($event-target-selector as <code class="type">xs:anyType</code>, $event-type as <code class="type">xs:string</code>,
	$listener as <code class="type">item()</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:add-event-listener</code>($event-target-selector as <code class="type">xs:anyType</code>, $event-type as <code class="type">xs:string</code>,
	$listener as <code class="type">item()</code>, $useCapture as <code class="type">xs:boolean</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$event-target-selector</code> is the selector for the target of the event. The target may be an element, the document
                        itself, etc.
                        See <a href="#dom-4">[W3C DOM4]</a> for more details.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-type</code> is the event type being removed.
                     </p>
                  </li>
                  <li>
                     <p><code>$listener</code> is the handler of an action, a block of code, or a function to be removed.
                     </p>
                  </li>
                  <li>
                     <p><code>$useCapture</code> is the indication that the current listener was registered as a capturing listener
                        or not. Its default value is <code>false()</code>.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e437" id="d4e437"></a>5.4 The <code>ua:dispatch-event()</code> function
               </h3>
               <p>This function dispatches an event at the specified target, thus being invoked in the
                  appropriate order the correspondent event listeners.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:dispatch-event</code>($event-name as <code class="type">xs:string</code>, $event-target-selector as <code class="type">xs:anyType</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$event-name</code> is the name of event to dispatch.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-target-selector</code> is the selector for the target of the event. The target may be an element, the document
                        itself, etc.
                        See <a href="#dom-4">[W3C DOM4]</a> for more details.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e472" id="d4e472"></a>6 Actions
            </h2>
            <p>These functions define actions to be executed by direct invoking or when a certain
               event occurs.
            </p>
            <div class="div2">
               
               <h3><a name="d4e477" id="d4e477"></a>6.1 The <code>ua:action()</code> function
               </h3>
               <p>This function defines an action to be invoked when a DOM event occurs.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:action</code>($id as <code class="type">xs:ID</code>,
	$parameters as <code class="type">map(xs:string, xs:string)</code>,
	$code-block as <code class="type">item()*</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:action</code>($id as <code class="type">xs:ID</code>,
	$event-name as <code class="type">xs:QName</code>,
	$parameters as <code class="type">map(xs:string, xs:string</code>,
	$code-block as <code class="type">item()*</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$id</code> is the action's identificator. If the identificator is not unique within the script,
                        this is an error <a href="#errUA01">[err:UA01]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-name</code> represents the name of the event that triggers the execution of the action.
                        If the event does not exist, this is an error <a href="#errUA02">[err:UA02]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$parameters</code> represents the parameters passed for the execution of the action.
                     </p>
                  </li>
                  <li>
                     <p><code>$code-block</code> represents the code to be executed.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e548" id="d4e548"></a>7 Mutation observers
            </h2>
            <p>These functions deal with Mutation observers, as they are defined in <a href="#dom-4">[W3C DOM4]</a>.
            </p>
            <div class="div2">
               
               <h3><a name="d4e555" id="d4e555"></a>7.1 The <code>ua:observer()</code> function
               </h3>
               <p>This function creates a mutations observer. It has two signatures, one taking as second
                  parameter a list of action handlers separated by spaces,
                  and the other one considering as second parameter a function item.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:observer</code>($id as <code class="type">xs:ID</code>, $action-handlers as <code class="type">xs:IDREFS</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:observer</code>($id as <code class="type">xs:ID</code>, $action as <code class="type">function(*)</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$id</code> is the observer's identificator. If the identificator is not unique within the script,
                        this is an error <a href="#errUA01">[err:UA01]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$action-handlers</code> is the list of action handlers separated by spaces, to be executed. If the action
                        handler are not unique within the script,
                        this is an error <a href="#errUA01">[err:UA01]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$action</code> is the function item to be executed.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e611" id="d4e611"></a>7.2 The <code>ua:connect-observer()</code> function
               </h3>
               <p>This function connects an observer to a node, in order to observe the node mutations.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:connect-observer</code>($observer-handler as <code class="type">xs:IDREF</code>, $node-selector as <code class="type">xs:string</code>,
	$options as <code class="type">map(xs:string, xs:string)</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$observer-handler</code> is the observer's handler. If the identificator does not exist, this is an error
                        <a href="#errUA03">[err:UA03]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$node-selector</code> is the selector used to select the nodes to be observed; see <a href="#selectors"><b>4 Selectors</b></a>. If the selector selects multiple
                        nodes, all these nodes are observed.
                     </p>
                  </li>
                  <li>
                     <p><code>$options</code> are the options describing the properties and values for observing the selected node.
                        See <a href="#dom-4">[W3C DOM4]</a> for more
                        details.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e658" id="d4e658"></a>7.3 The <code>ua:disconnect-observer()</code> function
               </h3>
               <p>This function disconnects an observer from a node. The observer will stop observing
                  the node until it will be connected again to the node.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:disconnect-observer</code>($observer-handler as <code class="type">xs:IDREF</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$observer-handler</code> is the observer's handler. If the identificator does not exist, this is an error
                        <a href="#errUA03">[err:UA03]</a>.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="d4e685" id="d4e685"></a>8 Templates
            </h2>
            <p>These function are for handling the HTML templates to be applied to the content of
               the host document or to the content of hosted
               documents (see <a href="#data-instances"><b>9 Data instances</b></a> for details on host / hosted document(s)). This specification is considering the
               HTML
               templates as they are mentioned in <a href="#html5">[HTML Living Standard]</a>.
            </p>
            <p>The content model of templates can consists of native HTML elements or custom HTML
               elements. For details about custom HTML
               elements, see <a href="#custom-elements">[Custom Elements]</a>.
            </p>
            <p>The implementations have to define the custom elements they are using, along with
               the content models of the respective custom elements (if any),
               according to the specification <a href="#custom-elements">[Custom Elements]</a>.
            </p>
            <div class="div2">
               
               <h3><a name="d4e702" id="d4e702"></a>8.1 Custom data attributes
               </h3>
               <p>These attributes are <code>data-*</code> type attributes, and are meant to ease the definition and usage of templates.
               </p>
               <p>The attributes are "namespaced" by using the prefix <code>ua</code> of this module.
               </p>
               <div class="div3">
                  
                  <h4><a name="d4e715" id="d4e715"></a>8.1.1 Custom data attribute <code>data-ua-ref</code></h4>
                  <p>This attribute if for defining the XPath expression that binds the respective form
                     control to a certain location (a data element) in one of the data instances.
                     	            For more details regarding these expressions and data instances, see
                     <a href="#data-instances"><b>9 Data instances</b></a>.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a name="d4e724" id="d4e724"></a>8.1.2 Custom data attribute <code>data-ua-type</code></h4>
                  <p>This attribute if for defining the type of template.</p>
                  <p>Legal values:</p>
                  <ul>
                     <li>
                        <p><code>modal</code> or <code>modeless</code>, in case the template is a <code>dialog</code> element.
                           	                  The default value is <code>modal</code>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e748" id="d4e748"></a>8.2 The <code>ua:context()</code> function
               </h3>
               <p>This function returns the node the template is applied to.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:context</code>() as <code class="type">node()</code>
</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="d4e764" id="d4e764"></a>8.3 The <code>ua:template()</code> function
               </h3>
               <p>This function creates a template.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:template</code>($id as <code class="type">xs:ID</code>, $content as <code class="type">item()*</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$id</code> is the template's identificator. If the identificator is not unique within the script,
                        this is an error <a href="#errUA01">[err:UA01]</a>.
                     </p>
                  </li>
                  <li>
                     <p><code>$content</code> is the content of the template.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e799" id="d4e799"></a>8.4 The <code>ua:attach-template()</code> function
               </h3>
               <p>This function attaches a template to one or more nodes. Displaying of the attached
                  templated when the document is loaded depends on the value of the
                  <code>open</code> attribute, as it is described in <a href="#html5">[HTML Living Standard]</a>, or on the <code>visibility</code> or <code>display</code> CSS instructions, respectively.
               </p>
               <p>It is possible to attach a template when a certain event is dispatched, by using the
                  parameter $event-name to specify the name of the respective event.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:attach-template</code>($node-selector as <code class="type">xs:string</code>, $template-id as <code class="type">xs:IDREF</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:attach-template</code>($node-selector as <code class="type">xs:string</code>, $template-id as <code class="type">xs:IDREF</code>, $event-name as <code class="type">xs:string</code>?) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$node-selector</code> is the selector used to select the nodes to attache the template to; see <a href="#selectors"><b>4 Selectors</b></a>. If the selector selects multiple
                        nodes, the template is attached to all these nodes.
                     </p>
                  </li>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template to be attached.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-name</code> is the name of the event triggering the attaching of the template.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e869" id="d4e869"></a>8.5 The <code>ua:dettach-template()</code> function
               </h3>
               <p>This function dettaches a template from one or more nodes. It has two signatures,
                  the second one dettaching a template in case when an event is dispatched.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:dettach-template</code>($node-selector as <code class="type">xs:string</code>, $template-id as <code class="type">xs:IDREF</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:dettach-template</code>($node-selector as <code class="type">xs:string</code>, $template-id as <code class="type">xs:IDREF</code>, $event-name as <code class="type">xs:string</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$node-selector</code> is the selector used to select the nodes to dettache the template from; see <a href="#selectors"><b>4 Selectors</b></a>. If the selector selects multiple
                        nodes, the template is dettached from all these nodes.
                     </p>
                  </li>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template to be dettached.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-name</code> is the name of the event triggering the dettaching of the template.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e926" id="d4e926"></a>8.6 The <code>ua:show-template()</code> function
               </h3>
               <p>This function shows a template attached to one or more nodes.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:show-template</code>($template-id as <code class="type">xs:IDREF</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template to be shown. If the indicated template does
                        not exist, this is an error <a href="#errUA05">[err:UA05]</a> 
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e953" id="d4e953"></a>8.7 The <code>ua:hide-template()</code> function
               </h3>
               <p>This function hides a template attached to one or more nodes.</p>
               <div class="exampleInner"><pre>
<code class="function">ua:hide-template</code>($template-id as <code class="type">xs:IDREF</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template to be hidden. If the indicated template does
                        not exist, this is an error <a href="#errUA05">[err:UA05]</a> 
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e981" id="d4e981"></a>8.8 The <code>ua:get-template()</code> function
               </h3>
               <p>This function gets a template, in order to be examined, modified, etc. It returns
                  the template as a sequence.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:get-template</code>($template-id as <code class="type">xs:IDREF</code>) as <code class="type">item()*</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template.
                     </p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a name="d4e1006" id="d4e1006"></a>8.9 The <code>ua:update-template()</code> function
               </h3>
               <p>This function updates a template. It has two signatures, the second one updating a
                  template in case when an event is dispatched. All the nodes having the respective
                  template
                  attached to them will have their view refreshened based upon the updated template.
               </p>
               <div class="exampleInner"><pre>
<code class="function">ua:update-template</code>($template-id as <code class="type">xs:IDREF</code>, $new-content as <code class="type">item()*</code>) as <code class="type">empty()</code>
</pre></div>
               <div class="exampleInner"><pre>
<code class="function">ua:update-template</code>($template-id as <code class="type">xs:IDREF</code>, $new-content as <code class="type">item()*</code>, $event-name as <code class="type">xs:string</code>) as <code class="type">empty()</code>
</pre></div>
               <ul>
                  <li>
                     <p><code>$template-id</code> is the identificator of the template to be updated.
                     </p>
                  </li>
                  <li>
                     <p><code>$content</code> is the new content of the template.
                     </p>
                  </li>
                  <li>
                     <p><code>$event-name</code> is the name of the event triggering the updating of the template.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="div1">
            
            <h2><a name="data-instances" id="data-instances"></a>9 Data instances
            </h2>
            <p>TBD</p>
            <p>Details on host / hosted document(s).</p>
         </div>
         <div class="div1">
            
            <h2><a name="d4e1068" id="d4e1068"></a>10 Scenarios of usage
            </h2>
            <p>Scenarios of usage of the functions comprised by this module.</p>
            <div class="div2">
               
               <h3><a name="create-event-scenario" id="create-event-scenario"></a>10.1 Create an event
               </h3>
               <p>This scenario presents how to create events using both signatures of the function
                  ua:create-event(), by using default parameters or setting values to parameters.
               </p>
               <div class="exampleInner"><pre>
ua:create-event('custom-event')
				</pre></div>
               <div class="exampleInner"><pre>
ua:create-event('custom-event', map{"bubbles" := true(), "cancelable" := true(), "detail" := ("detail-1", "detail-2")})
				</pre></div>
               <div class="exampleInner"><pre>
ua:create-event('custom-event', map{"cancelable" := true(), "detail" := ("detail-1", "detail-2")})
				</pre></div>
               <div class="exampleInner"><pre>
ua:create-event('custom-event', map{"bubbles" := true()})
				</pre></div>
               <div class="exampleInner"><pre>
ua:create-event('custom-event', map{"detail" := ("detail-1", "detail-2")})
				</pre></div>
            </div>
            <div class="div2">
               
               <h3><a name="create-dialog-template" id="create-dialog-template"></a>10.2 Create a dialog template
               </h3>
               <p>This scenario presents how to create a dialog templates, both modal and modeless.</p>
               <div class="exampleInner"><pre>
    &lt;template&gt;
        &lt;dialog style="width: 600px; height: 320px;" title="Enter data for connection to server" data-ua-type="modal"&gt;
            &lt;table&gt;
                &lt;tr&gt;
                    &lt;td&gt;Username&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;Password&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input type="password" /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/dialog&gt;
    &lt;/template&gt;
				</pre></div>
               <div class="exampleInner"><pre>
    &lt;template&gt;
        &lt;dialog style="width: 600px; height: 320px;" title="Enter data for connection to server" data-ua-type="modeless"&gt;
            &lt;table&gt;
                &lt;tr&gt;
                    &lt;td&gt;Username&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;Password&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input type="password" /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/dialog&gt;
    &lt;/template&gt;
				</pre></div>
            </div>
         </div>
      </div>
      <div class="back">
         <div class="div1">
            
            <h2><a name="d4e1114" id="d4e1114"></a>A References
            </h2>
            <dl>
               <dt class="label"><a name="xpath-30" id="xpath-30"></a>XPath 3.0
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/xpath-30/">XML Path Language (XPath) 3.0</a>.
                  	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors.
                  W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xslt-30" id="xslt-30"></a>XSLT 3.0
               </dt>
               <dd>                        
                  	               <a href="http://w3.org/TR/xslt-30/">XSL Transformations (XSLT) Version 3.0</a>.
                  	               Michael Kay, editor. W3C Working Draft, 10 July 2012.
               </dd>
               <dt class="label"><a name="xquery-30" id="xquery-30"></a>XQuery 3.0
               </dt>
               <dd>                        
                  	               <a href="http://w3.org/TR/xquery-30/">XQuery 3.0: An XML Query Language</a>.
                  	               Jonathan Robie, Don Chamberlin, Michael Dyck, John Snelson, editors.
                  W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xpath-functions-30" id="xpath-functions-30"></a>XPath and XQuery Functions and Operators 3.0
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/xpath-functions-30/">XPath and XQuery Functions and Operators 3.0</a>.
                  	               Michael Kay, editor. W3C Working Draft, 13 December 2011.
               </dd>
               <dt class="label"><a name="xpath-datamodel-30" id="xpath-datamodel-30"></a>XQuery and XPath Data Model 3.0
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/xpath-datamodel-30/">XQuery and XPath Data Model 3.0</a>.
                  	   Norman Walsh, Anders Berglund, John Snelson, editors. W3C Working Draft, 13 December
                  2011.
               </dd>
               <dt class="label"><a name="dom-4" id="dom-4"></a>W3C DOM4
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/dom/">W3C DOM4</a>.
                  	   Anne van Kesteren, Aryeh Gregor, Ms2ger, Alex Russell, Robin Berjon, editors.
                  W3C Last Call Working Draft, 04 February 2014.
               </dd>
               <dt class="label"><a name="css-selectors" id="css-selectors"></a>CSS Selectors
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/selectors/">Selectors Level 3</a>.
                  	               Tantek Ãelik (Invited Expert), Elika J. Etemad (Invited Expert), Daniel
                  Glazman (Disruptive Innovations SARL), Ian Hickson (Google),
                  	               Peter Linss (former editor, Netscape/AOL), John Williams (former editor,
                  Quark, Inc.), editors. W3C Recommendation, 29 September 2011.
               </dd>
               <dt class="label"><a name="html5" id="html5"></a>HTML Living Standard
               </dt>
               <dd>
                  	               <a href="http://whatwg.org/specs/web-apps/current-work/multipage/">HTML Living Standard</a>. W3C Recommendation, 6 August 2014.
               </dd>
               <dt class="label"><a name="custom-elements" id="custom-elements"></a>Custom Elements
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/custom-elements/">Custom Elements</a>.
                  	               Dimitri Glazkov, Google, editor. W3C Last Call Working Draft, 24 October
                  2013.
               </dd>
               <dt class="label"><a name="xforms-1.1" id="xforms-1.1"></a>XForms 1.1
               </dt>
               <dd>
                  	               <a href="http://w3.org/TR/xforms/">XForms 1.1</a>.
                  	               John M. Boyer, IBM, editor. W3C Recommendation, 20 October 2009.
               </dd>
            </dl>
         </div>
         <div class="div1">
            
            <h2><a name="d4e1168" id="d4e1168"></a>B Summary of Error Conditions
            </h2>
            <dl>
               <dt class="label"><a name="errUA01" id="errUA01"></a>err:UA01
               </dt>
               <dd>The identificator $id is not unique.</dd>
               <dt class="label"><a name="errUA02" id="errUA02"></a>err:UA02
               </dt>
               <dd>The event $event-name does not exist.</dd>
               <dt class="label"><a name="errUA03" id="errUA03"></a>err:UA03
               </dt>
               <dd>The identificator $id does not exist.</dd>
               <dt class="label"><a name="errUA04" id="errUA04"></a>err:UA04
               </dt>
               <dd>No node was selected.</dd>
               <dt class="label"><a name="errUA05" id="errUA05"></a>err:UA05
               </dt>
               <dd>The template $template-id does not exist.</dd>
            </dl>
         </div>
      </div><script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-43293529-1']);
					_gaq.push(['_trackPageview']);
					(function() {
					var ga = document.createElement('script'); ga.type =
					'text/javascript';
					ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www')
					+
					'.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga,
					s);
					})();
				</script></body>
</html>